language: cpp
dist: bionic
jobs:
  include:
    - stage: Bare metal build
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - g++-8
      env:
        - CXX: g++-8
      before_install:
        - sudo apt update
        - sudo apt install cmake libboost-dev
      install:
        - mkdir build
        - cd build
        - cmake .. -DCMAKE_BUILD_TYPE=Release
      script:
        - make -j
    - stage: Dockerfile build
      services:
        - docker
      script:
        - docker build .
